<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>è‹±è¯­å°ç‹— Â· å®¶åº­ç»ˆæç‰ˆ</title>

<style>
body{
  margin:0;
  font-family:"Comic Sans MS","PingFang SC",sans-serif;
  background:linear-gradient(#eef7ff,#ffffff);
  text-align:center;
}
h1{margin:8px}
.hidden{display:none}

/* ===== å¡ç‰‡ ===== */
.card{
  background:#fff;border-radius:18px;
  padding:14px;width:420px;
  margin:10px auto;
  box-shadow:0 4px 12px rgba(0,0,0,.12);
}
button{
  width:100%;padding:12px;
  margin:6px 0;font-size:16px;
  border:none;border-radius:12px;
  background:#4caf50;color:#fff;
}
.secondary{background:#2196f3}
.shop{background:#ff9800}
.back{background:#9e9e9e}
input[type=range]{width:90%}
input[type=color]{margin-top:6px}

/* ===== å°ç‹— ===== */
.pet-wrap{position:relative;margin:10px auto;width:300px}
.pet{
  width:280px;height:280px;
  transition:transform .3s;
}
.pet.happy{transform:translateY(-8px)}

.ear{transform-origin:center bottom}
.eye{transform-origin:center center}

.decorate{
  position:absolute;left:50%;
  transform:translateX(-50%);
  pointer-events:none;
}
.hat{top:20px;font-size:42px}
.glasses{top:120px;font-size:36px}

/* ===== æŒ–ç©ºåŠ¨ç”» ===== */
.blank{
  display:inline-block;
  width:24px;
  border-bottom:3px solid #333;
  margin:0 2px;
  animation:pulse .8s infinite alternate;
}
@keyframes pulse{
  from{opacity:.4}
  to{opacity:1}
}
.letter-btn{
  width:auto;
  display:inline-block;
  margin:4px;
  padding:10px 14px;
}
</style>
</head>

<body>

<h1>ğŸ¶ æˆ‘çš„è‹±è¯­å°ç‹—</h1>

<!-- ===== å°ç‹— ===== -->
<div class="pet-wrap">
<svg id="dog" class="pet" viewBox="0 0 200 300">
  <ellipse cx="100" cy="180" rx="65" ry="85"
    fill="var(--dogColor,#fff)" stroke="#ccc" stroke-width="4"/>
  <circle cx="100" cy="90" r="55"
    fill="var(--dogColor,#fff)" stroke="#ccc" stroke-width="4"/>
  <ellipse id="earL" class="ear" cx="55" cy="60" rx="18" ry="35"
    fill="var(--dogColor,#fff)" stroke="#ccc"/>
  <ellipse id="earR" class="ear" cx="145" cy="60" rx="18" ry="35"
    fill="var(--dogColor,#fff)" stroke="#ccc"/>
  <circle id="eyeL" class="eye" cx="85" cy="90" r="6"/>
  <circle id="eyeR" class="eye" cx="115" cy="90" r="6"/>
  <circle cx="100" cy="105" r="5"/>
  <path d="M88 118 Q100 128 112 118"
    stroke="#000" stroke-width="3" fill="none"/>
  <line x1="80" y1="240" x2="80" y2="280" stroke="#ccc" stroke-width="6"/>
  <line x1="120" y1="240" x2="120" y2="280" stroke="#ccc" stroke-width="6"/>
</svg>
</div>

<div id="status"></div>
<div id="score"></div>

<div class="card" id="home">
  <button onclick="enterStudy()">ğŸ“˜ å­¦ä¹ </button>
  <button class="secondary" onclick="enterCheckup()">ğŸ¥ ä½“æ£€</button>
  <button class="shop" onclick="openShop()">ğŸª å•†åº— / è®¾è®¡</button>
</div>

<div class="card hidden" id="shop">
  <h3>ğŸ’Š è¯å“å•†åº—ï¼ˆ5 åˆ† / ä¸ªï¼‰</h3>
  <button onclick="buyMedicine('headache')">ğŸ’Š å¤´ç—›è¯</button>
  <button onclick="buyMedicine('toothache')">ğŸ’Š ç‰™ç—›è¯</button>
  <button onclick="buyMedicine('stomach-ache')">ğŸ’Š èƒƒç—›è¯</button>
  <button onclick="buyMedicine('backache')">ğŸ’Š èƒŒç—›è¯</button>
  <button onclick="buyMedicine('cold')">ğŸ’Š æ„Ÿå†’è¯</button>
  <button onclick="buyMedicine('hurt')">ğŸ’Š å¤–ä¼¤è¯</button>
  <button class="back" onclick="closeShop()">â¬… è¿”å›</button>
</div>

<script>
/* ===== ç–¾ç—…æ±  ===== */
const DISEASES=[
  "headache",
  "toothache",
  "stomach-ache",
  "backache",
  "cold",
  "hurt"
];

/* ===== çŠ¶æ€ ===== */
let state=JSON.parse(localStorage.getItem("DOG_DISEASE"))||{
  score:0,
  mood:"healthy",
  disease:null
};
function save(){localStorage.setItem("DOG_DISEASE",JSON.stringify(state))}

/* ===== ç”Ÿç—…åˆ¤å®š ===== */
function checkDisease(){
  if(state.score>30){
    state.mood="sick";
    state.disease=randomDisease();
  }else if(state.score>15){
    state.mood="sick";
    state.disease=randomDisease();
  }
}
function randomDisease(){
  return DISEASES[Math.floor(Math.random()*DISEASES.length)];
}

/* ===== å•†åº— ===== */
function buyMedicine(type){
  if(state.mood!=="sick"){
    alert("å°ç‹—ç°åœ¨ä¸éœ€è¦åƒè¯");
    return;
  }
  if(state.score<5){
    alert("ç§¯åˆ†ä¸å¤Ÿ");
    return;
  }
  if(type!==state.disease){
    alert("ç”¨é”™è¯äº†ï¼");
    return;
  }
  state.score-=5;
  state.mood="healthy";
  state.disease=null;
  save();render();
}

/* ===== é¡µé¢ ===== */
function enterStudy(){alert("å­¦ä¹ æ¨¡å—ä¿æŒä¸å˜")}
function enterCheckup(){alert("ä½“æ£€æ¨¡å—ä¿æŒä¸å˜")}
function openShop(){home.classList.add("hidden");shop.classList.remove("hidden")}
function closeShop(){shop.classList.add("hidden");home.classList.remove("hidden")}

/* ===== æ˜¾ç¤º ===== */
function render(){
  score.innerText="ç§¯åˆ†ï¼š"+state.score;
  status.innerText=
    state.mood==="healthy"
    ? "çŠ¶æ€ï¼šå¥åº· ğŸ˜Š"
    : "çŠ¶æ€ï¼šç”Ÿç—…äº† ğŸ¤’ï¼ˆ"+state.disease+"ï¼‰";
}
render();save();
</script>

</body>
</html>
