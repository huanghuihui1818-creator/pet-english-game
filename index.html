<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>è‹±è¯­å® ç‰© Â· ç™½è‰²å°ç‹—ï¼ˆäº”å¹´çº§ï¼‰</title>

<style>
body{
  margin:0;
  font-family:"Comic Sans MS","PingFang SC",sans-serif;
  background:linear-gradient(#e6f4ff,#ffffff);
  text-align:center;
}
h1{margin:12px}

/* ===== å® ç‰© ===== */
.pet-wrap{position:relative;margin:20px auto;width:240px}
.pet{
  width:220px;height:220px;margin:auto;
  transition:transform .3s;
}
.pet.happy{transform:translateY(-6px)}
.blink{animation:blink 4s infinite}
@keyframes blink{0%,95%,100%{transform:scaleY(1)}96%,99%{transform:scaleY(.1)}}

/* é…é¥° */
.decorate{
  position:absolute;
  left:50%;transform:translateX(-50%);
  pointer-events:none;
}
.hat{top:12px;font-size:36px}
.glasses{top:82px;font-size:32px}

/* ===== å¡ç‰‡ ===== */
.card{
  background:#fff;border-radius:16px;
  padding:16px;width:360px;
  margin:12px auto;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
}
.word{font-size:26px;margin-bottom:10px}
button{
  width:100%;padding:12px;
  margin:6px 0;font-size:16px;
  border:none;border-radius:12px;
  background:#4caf50;color:#fff;
  cursor:pointer;
}
.shop-btn{background:#ff9800}
.back-btn{background:#9e9e9e}
.info{font-size:16px;margin:6px}
.hidden{display:none}
input{
  width:90%;padding:10px;
  font-size:18px;margin-top:8px;
  border-radius:8px;border:1px solid #ccc;
}
.hint{font-size:14px;color:#555;margin-top:6px}
</style>
</head>

<body>

<h1>ğŸ¶ æˆ‘çš„è‹±è¯­å°ç‹—</h1>

<div class="pet-wrap">
  <svg id="pet" class="pet" viewBox="0 0 200 200">
    <circle cx="100" cy="110" r="80" fill="#ffffff" stroke="#ccc" stroke-width="4"/>
    <ellipse cx="45" cy="70" rx="25" ry="45" fill="#fff" stroke="#ccc" stroke-width="3"/>
    <ellipse cx="155" cy="70" rx="25" ry="45" fill="#fff" stroke="#ccc" stroke-width="3"/>
    <ellipse class="blink" cx="75" cy="100" rx="10" ry="14"/>
    <ellipse class="blink" cx="125" cy="100" rx="10" ry="14"/>
    <circle cx="100" cy="120" r="6" fill="#000"/>
    <path d="M85 135 Q100 145 115 135" stroke="#000" stroke-width="4" fill="none"/>
  </svg>
  <div id="hat" class="decorate hat hidden">ğŸ©</div>
  <div id="glasses" class="decorate glasses hidden">ğŸ•¶ï¸</div>
</div>

<div class="info" id="statusText"></div>
<div class="info" id="scoreText"></div>

<!-- å­¦ä¹ å¡ -->
<div class="card" id="gameCard">
  <div class="word" id="question"></div>

  <!-- é€‰æ‹©é¢˜ -->
  <div id="choiceArea">
    <button onclick="answerChoice(0)" id="c0"></button>
    <button onclick="answerChoice(1)" id="c1"></button>
  </div>

  <!-- æ‹¼å†™é¢˜ -->
  <div id="spellArea" class="hidden">
    <div id="spellHint"></div>
    <input id="spellInput" placeholder="è¯·è¾“å…¥è‹±æ–‡å•è¯">
    <div class="hint" id="spellTip"></div>
    <button onclick="checkSpell()">æäº¤</button>
  </div>

  <button class="shop-btn" onclick="openShop()">ğŸª å•†åº—</button>
</div>

<!-- å•†åº— -->
<div class="card hidden" id="shopCard">
  <h3>ğŸª å® ç‰©å•†åº—</h3>
  <button onclick="buyHat()">ğŸ© å¸½å­ï¼ˆ5åˆ†ï¼‰</button>
  <button onclick="buyGlasses()">ğŸ•¶ï¸ çœ¼é•œï¼ˆ5åˆ†ï¼‰</button>
  <button onclick="buyMedicine()">ğŸ’Š è¯ï¼ˆ10åˆ†ï¼‰</button>
  <button class="back-btn" onclick="closeShop()">â¬… è¿”å›</button>
</div>

<script>
/* ===== äº”å¹´çº§è¯åº“ 100 ä¸ª ===== */
const words=[
["apple","è‹¹æœ"],["banana","é¦™è•‰"],["orange","æ©™å­"],["pear","æ¢¨"],["grape","è‘¡è„"],
["dog","ç‹—"],["cat","çŒ«"],["rabbit","å…”å­"],["tiger","è€è™"],["panda","ç†ŠçŒ«"],
["teacher","è€å¸ˆ"],["student","å­¦ç”Ÿ"],["friend","æœ‹å‹"],["family","å®¶åº­"],["parent","çˆ¶æ¯"],
["school","å­¦æ ¡"],["classroom","æ•™å®¤"],["library","å›¾ä¹¦é¦†"],["hospital","åŒ»é™¢"],["shop","å•†åº—"],
["run","è·‘"],["walk","èµ°"],["jump","è·³"],["swim","æ¸¸æ³³"],["read","è¯»"],
["write","å†™"],["draw","ç”»"],["sing","å”±"],["dance","è·³èˆ"],["play","ç©"],
["big","å¤§çš„"],["small","å°çš„"],["long","é•¿çš„"],["short","çŸ­çš„"],["happy","å¼€å¿ƒçš„"],
["sad","éš¾è¿‡çš„"],["fast","å¿«çš„"],["slow","æ…¢çš„"],["early","æ—©çš„"],["late","æ™šçš„"],
["morning","æ—©ä¸Š"],["afternoon","ä¸‹åˆ"],["evening","æ™šä¸Š"],["today","ä»Šå¤©"],["tomorrow","æ˜å¤©"],
["sunny","æ™´æœ—çš„"],["rainy","ä¸‹é›¨çš„"],["cloudy","å¤šäº‘çš„"],["windy","æœ‰é£çš„"],["snowy","ä¸‹é›ªçš„"],
["food","é£Ÿç‰©"],["water","æ°´"],["milk","ç‰›å¥¶"],["bread","é¢åŒ…"],["rice","ç±³é¥­"],
["book","ä¹¦"],["pen","é’¢ç¬”"],["desk","ä¹¦æ¡Œ"],["chair","æ¤…å­"],["bag","ä¹¦åŒ…"],
["red","çº¢è‰²"],["blue","è“è‰²"],["green","ç»¿è‰²"],["yellow","é»„è‰²"],["black","é»‘è‰²"],
["one","ä¸€"],["two","äºŒ"],["three","ä¸‰"],["four","å››"],["five","äº”"],
["ten","å"],["old","è€çš„"],["young","å¹´è½»çš„"],["new","æ–°çš„"],["good","å¥½çš„"],
["bad","åçš„"],["clean","å¹²å‡€çš„"],["dirty","è„çš„"],["open","æ‰“å¼€"],["close","å…³é—­"]
].map(w=>({en:w[0],cn:w[1]}));

/* ===== çŠ¶æ€ ===== */
let state=JSON.parse(localStorage.getItem("petDog5"))||{
 score:0,mood:"happy",hat:false,glasses:false
};
function save(){localStorage.setItem("petDog5",JSON.stringify(state))}

/* ===== å‡ºé¢˜ ===== */
let current,mode,dir,choices=[];

function loadQuestion(){
 spellInput.value="";
 spellTip.innerText="";
 current=words[Math.floor(Math.random()*words.length)];

 mode=Math.random()<0.5?"choice":"spell";
 dir=Math.random()<0.5?"en2cn":"cn2en";

 if(mode==="choice"){
  choiceArea.classList.remove("hidden");
  spellArea.classList.add("hidden");

  if(dir==="en2cn"){
    question.innerText=current.en+" çš„æ„æ€æ˜¯ï¼Ÿ";
    const wrong=words[Math.floor(Math.random()*words.length)].cn;
    choices=[current.cn,wrong].sort(()=>Math.random()-0.5);
  }else{
    question.innerText=current.cn+" ç”¨è‹±æ–‡æ€ä¹ˆè¯´ï¼Ÿ";
    const wrong=words[Math.floor(Math.random()*words.length)].en;
    choices=[current.en,wrong].sort(()=>Math.random()-0.5);
  }
  c0.innerText=choices[0];
  c1.innerText=choices[1];
 }else{
  choiceArea.classList.add("hidden");
  spellArea.classList.remove("hidden");
  question.innerText="æ‹¼å†™å•è¯";
  spellHint.innerText="ä¸­æ–‡æç¤ºï¼š"+current.cn;
 }
}

/* ===== ä½œç­” ===== */
function answerChoice(i){
 const correct=(dir==="en2cn"?current.cn:current.en);
 if(choices[i]===correct){
  state.score++;
  state.mood="happy";
 }else{
  alert("æç¤ºï¼šæ­£ç¡®ç­”æ¡ˆæ˜¯ã€Œ"+correct+"ã€");
  state.mood="hungry";
 }
 checkSick();
 save();render();loadQuestion();
}

function checkSpell(){
 const v=spellInput.value.trim().toLowerCase();
 if(v===current.en.toLowerCase()){
  state.score++;
  state.mood="happy";
 }else{
  alert("æç¤ºï¼šæ­£ç¡®æ‹¼å†™æ˜¯ "+current.en);
  state.mood="hungry";
 }
 checkSick();
 save();render();loadQuestion();
}

/* ===== ç”Ÿç—…è§„åˆ™ ===== */
function checkSick(){
 if(state.score>30){
  state.mood="sick";
 }
}

/* ===== å•†åº— ===== */
function openShop(){
 gameCard.classList.add("hidden");
 shopCard.classList.remove("hidden");
}
function closeShop(){
 shopCard.classList.add("hidden");
 gameCard.classList.remove("hidden");
}
function buyHat(){
 if(state.score<5){alert("ç§¯åˆ†ä¸å¤Ÿ");return;}
 state.score-=5;state.hat=true;save();render();
}
function buyGlasses(){
 if(state.score<5){alert("ç§¯åˆ†ä¸å¤Ÿ");return;}
 state.score-=5;state.glasses=true;save();render();
}
function buyMedicine(){
 if(state.score<10){alert("ç§¯åˆ†ä¸å¤Ÿ");return;}
 if(state.mood!=="sick"){alert("å°ç‹—ç°åœ¨ä¸éœ€è¦åƒè¯");return;}
 state.score-=10;state.mood="happy";save();render();
}

/* ===== æ˜¾ç¤º ===== */
function render(){
 scoreText.innerText="ç§¯åˆ†ï¼š"+state.score;
 pet.classList.toggle("happy",state.mood==="happy");
 statusText.innerText=
  state.mood==="happy"?"çŠ¶æ€ï¼šå¼€å¿ƒ ğŸ˜Š":
  state.mood==="hungry"?"çŠ¶æ€ï¼šæœ‰ç‚¹é¥¿ ğŸ˜•":
  "çŠ¶æ€ï¼šç”Ÿç—…äº† ğŸ¤’ éœ€è¦ğŸ’Š";

 hat.classList.toggle("hidden",!state.hat);
 glasses.classList.toggle("hidden",!state.glasses);
}

loadQuestion();render();save();
</script>

</body>
</html>
